name-template: "Release $RESOLVED_VERSION"
tag-template: "$RESOLVED_VERSION"

# Categories match exactly with PR labels from labeler.yml
categories:
  - title: "ğŸš€ New MCP Tools"
    labels:
      - "mcp-tools"
      - "mcp-resources"
      - "mcp-prompts"

  - title: "ğŸ›ï¸ European Parliament Features"
    labels:
      - "ep-api"
      - "ep-data"
      - "meps"
      - "plenary"
      - "committees"
      - "documents"

  - title: "ğŸš€ New Features"
    labels:
      - "feature"
      - "enhancement"

  - title: "ğŸ¨ UI/UX Improvements"
    labels:
      - "ui"
      - "design"

  - title: "ğŸ—ï¸ Infrastructure & Performance"
    labels:
      - "infrastructure"
      - "performance"
      - "build"
      - "config"

  - title: "ğŸ”„ Code Quality & Refactoring"
    labels:
      - "refactor"
      - "testing"
      - "types"
      - "schemas"

  - title: "ğŸ”’ Security & Compliance"
    labels:
      - "security"
      - "gdpr"
      - "isms-compliance"

  - title: "ğŸ“ Documentation"
    labels:
      - "documentation"

  - title: "ğŸ“¦ Dependencies"
    labels:
      - "dependencies"
      - "javascript"
      - "github_actions"

  - title: "ğŸ› Bug Fixes"
    labels:
      - "bug"
      - "fix"

  - title: "ğŸ§ª Test Coverage Improvements"
    labels:
      - "test-coverage-impact"
      - "needs-tests"
      - "high-coverage"
      - "e2e"

  - title: "ğŸ”Œ MCP Protocol Updates"
    labels:
      - "mcp-protocol"

  - title: "âš™ï¸ Component Updates"
    labels:
      - "component-tools"
      - "component-resources"
      - "component-client"

change-template: "- $TITLE @$AUTHOR (#$NUMBER)"
change-title-escapes: '\<*_&' # Escape markdown special characters

template: |
  # Highlights
  $CHANGES

  ## ğŸ›ï¸ European Parliament MCP Server Enhancements
  Changes in this release continue to enhance the European Parliament MCP Server's capabilities for providing AI assistants with structured access to parliamentary datasets, including:
  - Model Context Protocol (MCP) tools, resources, and prompts
  - European Parliament API integration and data access
  - Security-first architecture with GDPR compliance
  - High-performance caching and rate limiting
  - Comprehensive TypeScript typing and runtime validation

  ## ğŸ“Š Quality Metrics & Documentation
  [![Test Coverage](https://img.shields.io/badge/Test%20Coverage-80%25%2B-brightgreen?style=flat-square&logo=vitest)](https://hack23.github.io/European-Parliament-MCP-Server/coverage/)
  [![Unit Tests](https://img.shields.io/badge/Unit%20Tests-Passing-brightgreen?style=flat-square&logo=vitest)](https://hack23.github.io/European-Parliament-MCP-Server/test-results/)
  [![E2E Tests](https://img.shields.io/badge/E2E%20Tests-Passing-brightgreen?style=flat-square&logo=playwright)](https://hack23.github.io/European-Parliament-MCP-Server/e2e-results/)
  [![API Docs](https://img.shields.io/badge/API%20Docs-TypeDoc-blue?style=flat-square&logo=typescript)](https://hack23.github.io/European-Parliament-MCP-Server/api/)
  [![Documentation Portal](https://img.shields.io/badge/ğŸ“š%20Documentation-Portal-blue?style=flat-square)](https://hack23.github.io/European-Parliament-MCP-Server/)

  ## ğŸ” Security & Compliance
  [![OpenSSF Scorecard](https://api.securityscorecards.dev/projects/github.com/Hack23/European-Parliament-MCP-Server/badge?style=flat-square)](https://scorecard.dev/viewer/?uri=github.com/Hack23/European-Parliament-MCP-Server)
  [![SLSA 3](https://slsa.dev/images/gh-badge-level3.svg)](https://github.com/Hack23/European-Parliament-MCP-Server/attestations/)
  [![SBOM](https://img.shields.io/badge/SBOM-SPDX%202.3-blue?style=flat-square)](https://hack23.github.io/European-Parliament-MCP-Server/SBOM.md)
  [![SBOM Quality](https://img.shields.io/badge/SBOM%20Quality-Report-blue?style=flat-square)](https://hack23.github.io/European-Parliament-MCP-Server/SBOM.md)
  [![Attestations](https://img.shields.io/badge/Attestations-Available-success?style=flat-square)](https://hack23.github.io/European-Parliament-MCP-Server/ATTESTATIONS.md)

  ## ğŸ›¡ï¸ Hack23 ISMS Compliance
  [![Information Security Policy](https://img.shields.io/badge/ISMS-Information%20Security%20Policy-0A66C2?style=flat-square&logo=shield)](https://github.com/Hack23/ISMS-PUBLIC/blob/main/Information_Security_Policy.md)
  [![Open Source Policy](https://img.shields.io/badge/ISMS-Open%20Source%20Policy-0A66C2?style=flat-square&logo=opensource)](https://github.com/Hack23/ISMS-PUBLIC/blob/main/Open_Source_Policy.md)
  [![ISO 27001](https://img.shields.io/badge/ISMS-ISO%2027001-success?style=flat-square)](https://github.com/Hack23/ISMS-PUBLIC)
  [![NIST CSF 2.0](https://img.shields.io/badge/ISMS-NIST%20CSF%202.0-success?style=flat-square)](https://github.com/Hack23/ISMS-PUBLIC)
  [![CIS Controls v8.1](https://img.shields.io/badge/ISMS-CIS%20Controls%20v8.1-success?style=flat-square)](https://github.com/Hack23/ISMS-PUBLIC)
  [![GDPR](https://img.shields.io/badge/GDPR-Compliant-success?style=flat-square)](https://gdpr.eu/)

  This release maintains compliance with Hack23 AB's [Information Security Management System (ISMS)](https://github.com/Hack23/ISMS-PUBLIC):
  - âœ… **ISO 27001:2022** - Information security management
  - âœ… **NIST CSF 2.0** - Cybersecurity framework
  - âœ… **CIS Controls v8.1** - Security best practices
  - âœ… **GDPR** - EU data protection compliance
  - âœ… **SLSA Level 3** - Supply chain security with build provenance

  ## ğŸ’» Technology Stack
  - ğŸ”Œ **Model Context Protocol** - MCP SDK for AI integration
  - âš¡ **Node.js 24.x** - Latest LTS JavaScript runtime
  - ğŸ”· **TypeScript** - Strict typing with latest standards
  - ğŸ›ï¸ **European Parliament API** - Official open data access
  - ğŸ”’ **Zod** - Runtime schema validation
  - ğŸŒ **Undici** - Fast HTTP/1.1 client
  - ğŸ’¾ **LRU Cache** - Efficient caching for API responses
  - ğŸ§ª **Vitest** - Fast unit testing with 80%+ coverage

  ## ğŸ›ï¸ European Parliament Data Access
  - ğŸ‘¥ **MEPs** - Current and historical member information
  - ğŸ“Š **Plenary** - Sessions, votes, and attendance records
  - ğŸ›ï¸ **Committees** - Meetings, documents, and membership
  - ğŸ“„ **Documents** - Legislative texts, reports, amendments
  - â“ **Questions** - Parliamentary questions and answers

  ## ğŸ” Build Attestations & Verification

  All artifacts in this release include cryptographic attestations proving build integrity. For npm packages, use npm's provenance tooling; for GitHub artifacts, use GitHub attestations:

  ```bash
  # Primary: verify npm package provenance using npm signatures
  npm audit signatures european-parliament-mcp-server@$RESOLVED_VERSION

  # Optional: inspect attached attestations in the npm registry
  npm view european-parliament-mcp-server@$RESOLVED_VERSION dist.attestations

  # Verify GitHub artifact attestations for this repository
  gh attestation verify european-parliament-mcp-server@$RESOLVED_VERSION --owner Hack23 --repo European-Parliament-MCP-Server

  # View all GitHub attestations
  gh api /repos/Hack23/European-Parliament-MCP-Server/attestations
  ```

  **SLSA Level 3 Benefits:**
  - ğŸ” Cryptographic proof of build integrity
  - ğŸ›¡ï¸ Protection against supply chain attacks
  - ğŸ“‹ Full build provenance transparency
  - âœ… Independent verification capability

  See [ATTESTATIONS.md](https://hack23.github.io/European-Parliament-MCP-Server/ATTESTATIONS.md) for complete verification guide.

  ## ğŸ™ Contributors
  Thanks to $CONTRIBUTORS for their contributions to this release!

  ## ğŸ“š Additional Resources
  - **Documentation Portal**: https://hack23.github.io/European-Parliament-MCP-Server/
  - **API Documentation**: https://hack23.github.io/European-Parliament-MCP-Server/api/
  - **Test Coverage**: https://hack23.github.io/European-Parliament-MCP-Server/coverage/
  - **SBOM**: https://hack23.github.io/European-Parliament-MCP-Server/SBOM.md
  - **Security Policy**: https://github.com/Hack23/European-Parliament-MCP-Server/blob/main/SECURITY.md
  - **Hack23 ISMS**: https://github.com/Hack23/ISMS-PUBLIC

  **Full Changelog**: https://github.com/Hack23/European-Parliament-MCP-Server/compare/$PREVIOUS_TAG...$RESOLVED_VERSION

version-resolver:
  major:
    labels:
      - "major"
      - "breaking"
  minor:
    labels:
      - "feature"
      - "enhancement"
      - "mcp-tools"
      - "mcp-resources"
      - "mcp-prompts"
      - "ep-api"
      - "ep-data"
  patch:
    labels:
      - "bug"
      - "fix"
      - "security"
      - "dependencies"
      - "documentation"
      - "performance"
      - "refactor"
  default: patch

# Autolabeler is BACKUP for PRs without labels
# Primary labeling happens via .github/labeler.yml
autolabeler:
  # Features & Enhancements
  - label: "feature"
    title:
      - '/^feat(\([^)]+\))?:/i'
      - '/^feature(\([^)]+\))?:/i'
      - '/^add(\([^)]+\))?:/i'

  - label: "enhancement"
    title:
      - '/^enhance(\([^)]+\))?:/i'
      - '/^improve(\([^)]+\))?:/i'
      - '/^improvement(\([^)]+\))?:/i'

  # Bug Fixes
  - label: "bug"
    title:
      - '/^fix(\([^)]+\))?:/i'
      - '/^bug(\([^)]+\))?:/i'
      - '/^bugfix(\([^)]+\))?:/i'

  # MCP Development
  - label: "mcp-tools"
    title:
      - '/^mcp(\([^)]+\))?:/i'
      - '/^tool(\([^)]+\))?:/i'
    files:
      - 'src/tools/**/*'

  - label: "mcp-resources"
    title:
      - '/^resource(\([^)]+\))?:/i'
    files:
      - 'src/resources/**/*'

  - label: "mcp-prompts"
    title:
      - '/^prompt(\([^)]+\))?:/i'
    files:
      - 'src/prompts/**/*'

  - label: "mcp-protocol"
    title:
      - '/^protocol(\([^)]+\))?:/i'
    files:
      - 'src/protocol/**/*'
      - 'src/**/mcp/**/*'

  # European Parliament
  - label: "ep-api"
    title:
      - '/^ep-api(\([^)]+\))?:/i'
      - '/^api(\([^)]+\))?:/i'
    files:
      - 'src/api/**/*'
      - 'src/**/client/**/*'

  - label: "ep-data"
    title:
      - '/^ep-data(\([^)]+\))?:/i'
      - '/^data(\([^)]+\))?:/i'
    files:
      - 'src/data/**/*'

  - label: "meps"
    title:
      - '/^meps(\([^)]+\))?:/i'
      - '/^mep(\([^)]+\))?:/i'
    files:
      - 'src/**/meps/**/*'

  - label: "plenary"
    title:
      - '/^plenary(\([^)]+\))?:/i'
    files:
      - 'src/**/plenary/**/*'

  - label: "committees"
    title:
      - '/^committees(\([^)]+\))?:/i'
      - '/^committee(\([^)]+\))?:/i'
    files:
      - 'src/**/committees/**/*'

  - label: "documents"
    title:
      - '/^documents(\([^)]+\))?:/i'
      - '/^document(\([^)]+\))?:/i'
    files:
      - 'src/**/documents/**/*'

  # Documentation
  - label: "documentation"
    title:
      - '/^docs(\([^)]+\))?:/i'
      - '/^doc(\([^)]+\))?:/i'
    files:
      - '**/*.md'
      - 'docs/**/*'
      - '**/*.mdx'

  # Dependencies - CRITICAL FOR DEPENDABOT
  - label: "dependencies"
    title:
      - '/^build\(deps\):/i'
      - '/^build\(deps-dev\):/i'
      - '/^chore\(deps\):/i'
      - '/^chore\(deps-dev\):/i'
      - '/^deps(\([^)]+\))?:/i'
      - '/^dependency(\([^)]+\))?:/i'
      - '/^dependencies(\([^)]+\))?:/i'
      - '/^bump/i'
      - '/^update.*dependenc/i'
      - '/^upgrade.*dependenc/i'

  # Security
  - label: "security"
    title:
      - '/^security(\([^)]+\))?:/i'
      - '/^sec(\([^)]+\))?:/i'
      - '/^fix-vuln(\([^)]+\))?:/i'
      - '/\[security\]/i'

  - label: "gdpr"
    title:
      - '/^gdpr(\([^)]+\))?:/i'
      - '/^privacy(\([^)]+\))?:/i'
    files:
      - 'src/**/privacy/**/*'
      - 'src/**/gdpr/**/*'

  - label: "isms-compliance"
    title:
      - '/^isms(\([^)]+\))?:/i'
      - '/^compliance(\([^)]+\))?:/i'
    files:
      - '**/ISMS*'
      - '*_Policy.md'

  # Performance
  - label: "performance"
    title:
      - '/^perf(\([^)]+\))?:/i'
      - '/^optimize(\([^)]+\))?:/i'

  # Infrastructure
  - label: "infrastructure"
    title:
      - '/^infra(\([^)]+\))?:/i'
      - '/^ci(\([^)]+\))?:/i'
      - '/^cd(\([^)]+\))?:/i'
    files:
      - '.github/**/*'

  - label: "build"
    title:
      - '/^build(\([^)]+\))?:/i'
      - '/^chore\(build\):/i'
    files:
      - 'tsconfig.json'
      - 'vitest.config.*'

  - label: "config"
    title:
      - '/^config(\([^)]+\))?:/i'
      - '/^chore\(config\):/i'
    files:
      - '**/*.config.*'
      - '**/tsconfig*.json'

  # Code Quality
  - label: "refactor"
    title:
      - '/^refactor(\([^)]+\))?:/i'

  - label: "testing"
    title:
      - '/^test(\([^)]+\))?:/i'
    files:
      - '**/*.test.*'
      - '**/*.spec.*'
      - '__tests__/**/*'

  - label: "types"
    title:
      - '/^types(\([^)]+\))?:/i'
      - '/^type(\([^)]+\))?:/i'
    files:
      - '**/*.d.ts'
      - 'src/types/**/*'

  # Test Coverage
  - label: "test-coverage-impact"
    files:
      - '**/*.test.{ts,tsx}'
      - '**/__tests__/**'

  - label: "needs-tests"
    files:
      - 'src/tools/**/*'
      - 'src/resources/**/*'

  - label: "high-coverage"
    files:
      - 'src/index.ts'
      - 'src/types/**/*'

  - label: "e2e"
    title:
      - '/^e2e(\([^)]+\))?:/i'
    files:
      - 'e2e/**/*'
      - '**/*.e2e.*'

  # Component labels
  - label: "component-tools"
    files:
      - 'src/tools/**/*'

  - label: "component-resources"
    files:
      - 'src/resources/**/*'

  - label: "component-client"
    files:
      - 'src/client/**/*'
      - 'src/api/**/*'

  # Schemas
  - label: "schemas"
    files:
      - 'src/schemas/**/*'
      - 'src/**/*schema*'
