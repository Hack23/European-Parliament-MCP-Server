name-template: "Release $RESOLVED_VERSION"
tag-template: "$RESOLVED_VERSION"

# Categories match exactly with PR labels from labeler.yml
categories:
  - title: "ğŸš€ New MCP Tools"
    labels:
      - "mcp-tools"
      - "mcp-resources"
      - "mcp-prompts"

  - title: "ğŸ›ï¸ European Parliament Features"
    labels:
      - "ep-api"
      - "ep-data"
      - "meps"
      - "plenary"
      - "committees"
      - "documents"

  - title: "ğŸš€ New Features"
    labels:
      - "feature"
      - "enhancement"

  - title: "ğŸ¨ UI/UX Improvements"
    labels:
      - "ui"
      - "design"

  - title: "ğŸ—ï¸ Infrastructure & Performance"
    labels:
      - "infrastructure"
      - "performance"
      - "build"
      - "config"

  - title: "ğŸ”„ Code Quality & Refactoring"
    labels:
      - "refactor"
      - "testing"
      - "types"
      - "schemas"

  - title: "ğŸ”’ Security & Compliance"
    labels:
      - "security"
      - "gdpr"
      - "isms-compliance"

  - title: "ğŸ“ Documentation"
    labels:
      - "documentation"

  - title: "ğŸ“¦ Dependencies"
    labels:
      - "dependencies"
      - "javascript"
      - "github_actions"

  - title: "ğŸ› Bug Fixes"
    labels:
      - "bug"
      - "fix"

  - title: "ğŸ§ª Test Coverage Improvements"
    labels:
      - "test-coverage-impact"
      - "needs-tests"
      - "high-coverage"
      - "e2e"

  - title: "ğŸ”Œ MCP Protocol Updates"
    labels:
      - "mcp-protocol"

  - title: "âš™ï¸ Component Updates"
    labels:
      - "component-tools"
      - "component-resources"
      - "component-client"

change-template: "- $TITLE @$AUTHOR (#$NUMBER)"
change-title-escapes: '\<*_&' # Escape markdown special characters

template: |
  # Highlights
  $CHANGES

  ## Security & Quality
  [![OpenSSF Scorecard](https://api.securityscorecards.dev/projects/github.com/Hack23/European-Parliament-MCP-Server/badge)](https://scorecard.dev/viewer/?uri=github.com/Hack23/European-Parliament-MCP-Server)
  
  ## Security Compliance
  [![SLSA 3](https://slsa.dev/images/gh-badge-level3.svg)](https://github.com/Hack23/European-Parliament-MCP-Server/attestations/)

  ## Technology Stack
  - ğŸ”Œ **Model Context Protocol** - MCP SDK for AI integration
  - âš¡ **Node.js 22+** - Modern JavaScript runtime
  - ğŸ”· **TypeScript** - Strict typing with latest standards
  - ğŸ›ï¸ **European Parliament API** - Official open data access
  - ğŸ”’ **Zod** - Runtime schema validation
  - ğŸŒ **Undici** - Fast HTTP/1.1 client
  - ğŸ’¾ **LRU Cache** - Efficient caching for API responses
  - ğŸ§ª **Vitest** - Fast unit testing with coverage

  ## European Parliament Data Access
  - ğŸ‘¥ **MEPs**: Current and historical member information
  - ğŸ“Š **Plenary**: Sessions, votes, and attendance records
  - ğŸ›ï¸ **Committees**: Meetings, documents, and membership
  - ğŸ“„ **Documents**: Legislative texts, reports, amendments
  - â“ **Questions**: Parliamentary questions and answers

  ## ISMS Compliance
  This release maintains compliance with:
  - âœ… ISO 27001:2022 - Information Security Management
  - âœ… NIST CSF 2.0 - Cybersecurity Framework
  - âœ… CIS Controls v8.1 - Security Best Practices
  - âœ… GDPR - Data Protection & Privacy
  - âœ… SLSA Level 3 - Supply Chain Security

  ## Contributors
  Thanks to $CONTRIBUTORS for their contributions to this release!

  **Full Changelog**: https://github.com/Hack23/European-Parliament-MCP-Server/compare/$PREVIOUS_TAG...$RESOLVED_VERSION

version-resolver:
  major:
    labels:
      - "major"
      - "breaking"
  minor:
    labels:
      - "feature"
      - "enhancement"
      - "mcp-tools"
      - "mcp-resources"
      - "mcp-prompts"
      - "ep-api"
      - "ep-data"
  patch:
    labels:
      - "bug"
      - "fix"
      - "security"
      - "dependencies"
      - "documentation"
      - "performance"
      - "refactor"
  default: patch

# Autolabeler is BACKUP for PRs without labels
# Primary labeling happens via .github/labeler.yml
autolabeler:
  # Features & Enhancements
  - label: "feature"
    title:
      - '/^feat(\([^)]+\))?:/i'
      - '/^feature(\([^)]+\))?:/i'
      - '/^add(\([^)]+\))?:/i'

  - label: "enhancement"
    title:
      - '/^enhance(\([^)]+\))?:/i'
      - '/^improve(\([^)]+\))?:/i'
      - '/^improvement(\([^)]+\))?:/i'

  # Bug Fixes
  - label: "bug"
    title:
      - '/^fix(\([^)]+\))?:/i'
      - '/^bug(\([^)]+\))?:/i'
      - '/^bugfix(\([^)]+\))?:/i'

  # MCP Development
  - label: "mcp-tools"
    title:
      - '/^mcp(\([^)]+\))?:/i'
      - '/^tool(\([^)]+\))?:/i'
    files:
      - 'src/tools/**/*'

  - label: "mcp-resources"
    title:
      - '/^resource(\([^)]+\))?:/i'
    files:
      - 'src/resources/**/*'

  - label: "mcp-prompts"
    title:
      - '/^prompt(\([^)]+\))?:/i'
    files:
      - 'src/prompts/**/*'

  - label: "mcp-protocol"
    title:
      - '/^protocol(\([^)]+\))?:/i'
    files:
      - 'src/protocol/**/*'
      - 'src/**/mcp/**/*'

  # European Parliament
  - label: "ep-api"
    title:
      - '/^ep-api(\([^)]+\))?:/i'
      - '/^api(\([^)]+\))?:/i'
    files:
      - 'src/api/**/*'
      - 'src/**/client/**/*'

  - label: "ep-data"
    title:
      - '/^ep-data(\([^)]+\))?:/i'
      - '/^data(\([^)]+\))?:/i'
    files:
      - 'src/data/**/*'

  - label: "meps"
    title:
      - '/^meps(\([^)]+\))?:/i'
      - '/^mep(\([^)]+\))?:/i'
    files:
      - 'src/**/meps/**/*'

  - label: "plenary"
    title:
      - '/^plenary(\([^)]+\))?:/i'
    files:
      - 'src/**/plenary/**/*'

  - label: "committees"
    title:
      - '/^committees(\([^)]+\))?:/i'
      - '/^committee(\([^)]+\))?:/i'
    files:
      - 'src/**/committees/**/*'

  - label: "documents"
    title:
      - '/^documents(\([^)]+\))?:/i'
      - '/^document(\([^)]+\))?:/i'
    files:
      - 'src/**/documents/**/*'

  # Documentation
  - label: "documentation"
    title:
      - '/^docs(\([^)]+\))?:/i'
      - '/^doc(\([^)]+\))?:/i'
    files:
      - '**/*.md'
      - 'docs/**/*'
      - '**/*.mdx'

  # Dependencies - CRITICAL FOR DEPENDABOT
  - label: "dependencies"
    title:
      - '/^build\(deps\):/i'
      - '/^build\(deps-dev\):/i'
      - '/^chore\(deps\):/i'
      - '/^chore\(deps-dev\):/i'
      - '/^deps(\([^)]+\))?:/i'
      - '/^dependency(\([^)]+\))?:/i'
      - '/^dependencies(\([^)]+\))?:/i'
      - '/^bump/i'
      - '/^update.*dependenc/i'
      - '/^upgrade.*dependenc/i'

  # Security
  - label: "security"
    title:
      - '/^security(\([^)]+\))?:/i'
      - '/^sec(\([^)]+\))?:/i'
      - '/^fix-vuln(\([^)]+\))?:/i'
      - '/\[security\]/i'

  - label: "gdpr"
    title:
      - '/^gdpr(\([^)]+\))?:/i'
      - '/^privacy(\([^)]+\))?:/i'
    files:
      - 'src/**/privacy/**/*'
      - 'src/**/gdpr/**/*'

  - label: "isms-compliance"
    title:
      - '/^isms(\([^)]+\))?:/i'
      - '/^compliance(\([^)]+\))?:/i'
    files:
      - '**/ISMS*'
      - '*_Policy.md'

  # Performance
  - label: "performance"
    title:
      - '/^perf(\([^)]+\))?:/i'
      - '/^optimize(\([^)]+\))?:/i'

  # Infrastructure
  - label: "infrastructure"
    title:
      - '/^infra(\([^)]+\))?:/i'
      - '/^ci(\([^)]+\))?:/i'
      - '/^cd(\([^)]+\))?:/i'
    files:
      - '.github/**/*'

  - label: "build"
    title:
      - '/^build(\([^)]+\))?:/i'
      - '/^chore\(build\):/i'
    files:
      - 'tsconfig.json'
      - 'vitest.config.*'

  - label: "config"
    title:
      - '/^config(\([^)]+\))?:/i'
      - '/^chore\(config\):/i'
    files:
      - '**/*.config.*'
      - '**/tsconfig*.json'

  # Code Quality
  - label: "refactor"
    title:
      - '/^refactor(\([^)]+\))?:/i'

  - label: "testing"
    title:
      - '/^test(\([^)]+\))?:/i'
    files:
      - '**/*.test.*'
      - '**/*.spec.*'
      - '__tests__/**/*'

  - label: "types"
    title:
      - '/^types(\([^)]+\))?:/i'
      - '/^type(\([^)]+\))?:/i'
    files:
      - '**/*.d.ts'
      - 'src/types/**/*'

  # Test Coverage
  - label: "test-coverage-impact"
    files:
      - '**/*.test.{ts,tsx}'
      - '**/__tests__/**'

  - label: "needs-tests"
    files:
      - 'src/tools/**/*'
      - 'src/resources/**/*'

  - label: "high-coverage"
    files:
      - 'src/index.ts'
      - 'src/types/**/*'

  - label: "e2e"
    title:
      - '/^e2e(\([^)]+\))?:/i'
    files:
      - 'e2e/**/*'
      - '**/*.e2e.*'

  # Component labels
  - label: "component-tools"
    files:
      - 'src/tools/**/*'

  - label: "component-resources"
    files:
      - 'src/resources/**/*'

  - label: "component-client"
    files:
      - 'src/client/**/*'
      - 'src/api/**/*'

  # Schemas
  - label: "schemas"
    files:
      - 'src/schemas/**/*'
      - 'src/**/*schema*'
